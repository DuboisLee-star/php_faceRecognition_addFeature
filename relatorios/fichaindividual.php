<?php	include_once("../config/config.php");	include_once ("../config/cabecalho.php");	include_once ("../config/url_painel.php");	//**************************************************	// função para formatar CPF e CNPJ | Tiago Moselli	//**************************************************	function formataCPFCNPJ($value){		$cnpj_cpf = preg_replace("/\D/", '', $value);		if(strlen($cnpj_cpf) === 11) {			return preg_replace("/(\d{3})(\d{3})(\d{3})(\d{2})/", "\$1.\$2.\$3-\$4", $cnpj_cpf);		} 		return preg_replace("/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/", "\$1.\$2.\$3/\$4-\$5", $cnpj_cpf);	}	//**************************************************	// Recebe o id do cliente do cliente via GET	$id_cliente = (isset($_GET['id'])) ? $_GET['id'] : '';	// Valida se existe um id e se ele é numérico	if (!empty($id_cliente) && is_numeric($id_cliente)):		// Captura os dados do cliente solicitado		$conexao = conexao::getInstance();		$sql = 'SELECT * FROM tab_membros WHERE id = :id';		$stm = $conexao->prepare($sql);		$stm->bindValue(':id', $id_cliente);		$stm->execute();		$cliente = $stm->fetch(PDO::FETCH_OBJ);		  	    // Captura os dados do cliente solicitado	    $conexao = conexao::getInstance();   	    $sql = 'SELECT * FROM info_clube WHERE id = :id';	    $stm = $conexao->prepare($sql);	    $stm->bindValue(':id', 1);	    $stm->execute();	    $clube = $stm->fetch(PDO::FETCH_OBJ);						if(!empty($cliente)):			// Formata a data no formato nacional			$array_data     = explode('-', $cliente->data_nascimento);			$data_formatada = $array_data[2] . '/' . $array_data[1] . '/' . $array_data[0];		endif;	endif;	        $html = '<table border=1>';			$html .= '<tr><td>'.$cliente->matricula.'</td></tr>';		#$result_membros = "SELECT * FROM tab_membros order by matricula";	#$resultado_membros = mysqli_query($conn, $result_membros);	#while($row_membros = mysqli_fetch_assoc($resultado_membros)){    #        #        	$html .= '<tr><td>'.$row_membros['matricula'] . "</td>";	#}		$html .= '</tbody>';	$html .= '</table>';		//referenciar o DomPDF com namespace	use Dompdf\Dompdf;	// include autoloader	require_once("dompdf/autoload.inc.php");	//Criando a Instancia	$dompdf = new DOMPDF(array('enable_remote' => true));	// Carrega seu HTML	$dompdf->load_html(utf8_encode('<!--*****************************************************************************************************                                     FICHA INDIVIDUAL DO(A) ATIRADOR(A)*****************************************************************************************************--><p align=center style="line-height: 120%; margin-left: 15; margin-right: 15">'.PDF_CABECALHO.'                        <h3 style="text-align: center;">F I C H A&nbsp;&nbsp;&nbsp;&nbsp;I N D I V I D U A L</h3><br>												<table cellpadding="0" cellspacing="0" border="0" width="550">							<tr>								<td align="rigth" valign="top" width="100">								<img src="https://sistema.hostmarq.com.br/fotos/'.$cliente->foto.'" height="141" width="115" id="foto-cliente" style="border-style: solid"></td>								<td valign="top" width="350">																<p align="justify" style="line-height: 130%; margin-left: 5; margin-right: 5"><font size="2"><b>Matrícula:</b> '.utf8_decode($cliente->matricula).' <br><b>Data Filiação:</b> '.date('d/m/Y', strtotime($cliente->data_filiacao)).' - <b>Data Renovação:</b> '.date('d/m/Y', strtotime($cliente->data_renovacao)).' <br><b>CR:</b> '.utf8_decode($cliente->cr).' - <b>Validade CR:</b> '.date('d/m/Y', strtotime($cliente->validade_cr)).' <br><br><b>'.utf8_decode($cliente->nome).'</b>, residente a <b>'.utf8_decode($cliente->rua).'</b> nº <b>'.utf8_decode($cliente->numero).'</b>, bairro: <b>'.utf8_decode($cliente->bairro).'</b>, CEP <b>'.utf8_decode($cliente->cep).'</b> - <b>'.utf8_decode($cliente->cidade).'</b>/<b>'.utf8_decode($cliente->siglauf).'</b>, CPF <b>'.formataCPFCNPJ($cliente->cpf).'</b>, identidade <b>'.utf8_decode($cliente->identidade).'</b>, D.Expedição <b>'.date('d/m/Y', strtotime($cliente->data_exped)).'</b> e Título eleitoral  <b>'.utf8_decode($cliente->tituloeleitoral).'</b>, Estado Civil <b>'.utf8_decode($cliente->estadocivil).'</b>, natural de <b>'.utf8_decode($cliente->naturalidade).'</b>, nacionalidade <b>'.utf8_decode($cliente->nacionalidade).'</b>, Data de Nascimento <b>'.date('d/m/Y', strtotime($cliente->data_nascimento)).'</b>, <b>'.utf8_decode($cliente->profissao).'</b>, email <b>'.utf8_decode($cliente->email).'</b>, telefone <b>'.utf8_decode($cliente->telefone).'</b>, filho de <b>'.utf8_decode($cliente->pai).'</b> e de <b>'.utf8_decode($cliente->mae).'</b>.<br><hr><b>TERMOS DE COMPROMISSOS</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Eu, <b>'.utf8_decode($cliente->nome).'</b>, estou ciente e concordo que: <b>1)</b> '.utf8_decode($clube->termos_filiacao).'; <b>2)</b> '.utf8_decode($clube->termos_estatuto).'; <b>3)</b> '.utf8_decode($clube->termos_idoneidade).'.<br><br>Acordo assinado em '.date('d-m-Y', strtotime($cliente->data_filiacao)).'.<br><div align="right">_______________________________________<br>'.utf8_decode($cliente->nome).'<br>CPF: '.formataCPFCNPJ($cliente->cpf).' <br>									</span>																</td>							</tr>						</table>					'));	//Renderizar o html	$dompdf->render();	//Exibibir a pÃ¡gina	$dompdf->stream(		"ficha_individual", 		array(			"Attachment" => true //Para realizar o download somente alterar para true		)	);?>